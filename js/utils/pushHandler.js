define([],function(){var l,e="962083387767",o={addCallback:function(l,e){console.log("addCallback"),void 0===window.callbacks&&(window.callbacks={}),window.callbacks[l]=e},initialize:function(){console.log("pushHandler.initialize()");try{l=window.plugins.pushNotification,l.notificationGCM=this.onNotificationGCM,$("#push-status-ul").append("<li>registering "+device.platform+"</li>"),o.addCallback("notificationGCM",o.onNotificationGCM),o.addCallback("notificationAPN",o.onNotificationAPN),"android"==device.platform||"Android"==device.platform||"amazon-fireos"==device.platform?l.register(o.successHandler,o.errorHandler,{senderID:e,ecb:"callbacks.notificationGCM"}):l.register(o.tokenHandler,o.errorHandler,{badge:"true",sound:"true",alert:"true",ecb:"callbacks.notificationAPN"})}catch(a){txt="There was an error initializing push messaging.\n\n",txt+="Error description: "+a.message+"\n\n",alert(txt)}},onNotificationAPN:function(e){if(console.log("onNotificationAPN"),e.alert&&($("#push-status-ul").append("<li>push-notification: "+e.alert+"</li>"),console.log("notification:"+e.alert),navigator.notification.alert(e.alert)),e.sound){console.log("play sound");var a=new Media(e.sound);a.play()}e.badge&&(console.log("displayBadge"),l.setApplicationIconBadgeNumber(o.successHandler,e.badge))},onNotificationGCM:function(l){switch(console.log("onNotificationGCM"),$("#push-status-ul").append("<li>EVENT -> RECEIVED:<ul><li>"+l.event+"</li></ul></li>"),l.event){case"registered":console.log("registered"),l.regid.length>0&&($("#push-status-ul").append("<li>REGISTERED -> REGID:<ul><li><span>"+l.regid+"</span><br><br><br></li></ul></li>"),console.log("regID = "+l.regid));break;case"message":if(l.foreground){console.log("--INLINE NOTIFICATION--"),$("#push-status-ul").append("<li>--INLINE NOTIFICATION--</li>");var e=l.soundname||l.payload.sound,o=new Media("/android_asset/www/"+e);o.play()}else l.coldstart?(console.log("--COLDSTART NOTIFICATION--"),$("#push-status-ul").append("<li>--COLDSTART NOTIFICATION--</li>")):(console.log("--BACKGROUND NOTIFICATION--"),$("#push-status-ul").append("<li>--BACKGROUND NOTIFICATION--</li>"));console.log("MESSAGE: "+l.payload.message),$("#push-status-ul").append("<li>MESSAGE -> MSG: <ul><li>"+l.payload.message+"</li></ul></li>"),l.payload.msgcnt&&(console.log("ANDROID COUNT:"+l.payload.msgcnt),$("#push-status-ul").append("<li>MESSAGE -> MSGCNT: <ul><li>"+l.payload.msgcnt+"</li></ul></li>")),l.payload.timeStamp&&(console.log("FIREOS TIMESTAMP:"+l.payload.timeStamp),$("#push-status-ul").append("<li>FIREOS -> TIMESTAMP: <ul><li>"+l.payload.timeStamp+"</ul></li></li>"));break;case"error":console.log("ERROR: "+l.msg),$("#push-status-ul").append("<li>ERROR -> MSG:<ul><li>"+l.msg+"</li></ul></li>"),alert(l.msg);break;default:console.log("EVENT UNKNOWN:"+l.event),$("#push-status-ul").append("<li>EVENT -> UNKOWN:<ul><li>"+l.event+"</li></ul></li>"),alert("UNKNOW EVENT: "+l.event)}},tokenHandler:function(l){console.log("tokenHandler"),console.log("result:"+l),$("#push-status-ul").append("<li>token: "+l+"</li>")},successHandler:function(l){console.log("successHandler"),console.log("success:"+l),$("#push-status-ul").append("<li>success:"+l+"</li>"),$("#push-status-ul").append("<li>please wait for event callback</li>"),console.log("please wait for callback")},errorHandler:function(l){console.log("errorHandler"),console.log("error:"+l),$("#push-status-ul").append("<li>error:"+l+"</li>")}};return o});