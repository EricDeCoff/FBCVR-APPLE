exports.defineAutoTests=function(){var e=function(e,t,o){var n="undefined"==typeof t?"Unexpected error callback":t;expect(!0).toFailWithMessage(n+"\n"+JSON.stringify(o)),e()},t=function(e,t){var o="undefined"==typeof t?"Unexpected success callback":t;expect(!0).toFailWithMessage(o),e()};describe("Media",function(){beforeEach(function(){jasmine.Expectation.addMatchers({toFailWithMessage:function(){return{compare:function(e,t){var o=!1;return{pass:o,message:t}}}}})}),it("media.spec.1 should exist",function(){expect(Media).toBeDefined(),expect(typeof Media).toBe("function")}),it("media.spec.2 should have the following properties",function(){var e=new Media("dummy");expect(e.id).toBeDefined(),expect(e.src).toBeDefined(),expect(e._duration).toBeDefined(),expect(e._position).toBeDefined(),e.release()}),it("media.spec.3 should define constants for Media status",function(){expect(Media).toBeDefined(),expect(Media.MEDIA_NONE).toBe(0),expect(Media.MEDIA_STARTING).toBe(1),expect(Media.MEDIA_RUNNING).toBe(2),expect(Media.MEDIA_PAUSED).toBe(3),expect(Media.MEDIA_STOPPED).toBe(4)}),it("media.spec.4 should define constants for Media errors",function(){expect(MediaError).toBeDefined(),expect(MediaError.MEDIA_ERR_NONE_ACTIVE).toBe(0),expect(MediaError.MEDIA_ERR_ABORTED).toBe(1),expect(MediaError.MEDIA_ERR_NETWORK).toBe(2),expect(MediaError.MEDIA_ERR_DECODE).toBe(3),expect(MediaError.MEDIA_ERR_NONE_SUPPORTED).toBe(4)}),it("media.spec.5 should contain a play function",function(){var e=new Media;expect(e.play).toBeDefined(),expect(typeof e.play).toBe("function"),e.release()}),it("media.spec.6 should contain a stop function",function(){var e=new Media;expect(e.stop).toBeDefined(),expect(typeof e.stop).toBe("function"),e.release()}),it("media.spec.7 should contain a seekTo function",function(){var e=new Media;expect(e.seekTo).toBeDefined(),expect(typeof e.seekTo).toBe("function"),e.release()}),it("media.spec.8 should contain a pause function",function(){var e=new Media;expect(e.pause).toBeDefined(),expect(typeof e.pause).toBe("function"),e.release()}),it("media.spec.9 should contain a getDuration function",function(){var e=new Media;expect(e.getDuration).toBeDefined(),expect(typeof e.getDuration).toBe("function"),e.release()}),it("media.spec.10 should contain a getCurrentPosition function",function(){var e=new Media;expect(e.getCurrentPosition).toBeDefined(),expect(typeof e.getCurrentPosition).toBe("function"),e.release()}),it("media.spec.11 should contain a startRecord function",function(){var e=new Media;expect(e.startRecord).toBeDefined(),expect(typeof e.startRecord).toBe("function"),e.release()}),it("media.spec.12 should contain a stopRecord function",function(){var e=new Media;expect(e.stopRecord).toBeDefined(),expect(typeof e.stopRecord).toBe("function"),e.release()}),it("media.spec.13 should contain a release function",function(){var e=new Media;expect(e.release).toBeDefined(),expect(typeof e.release).toBe("function"),e.release()}),it("media.spec.14 should contain a setVolume function",function(){var e=new Media;expect(e.setVolume).toBeDefined(),expect(typeof e.setVolume).toBe("function"),e.release()}),it("media.spec.15 should return MediaError for bad filename",function(e){var o="invalid.file.name";if("blackberry10"===cordova.platformId||"windowsphone"===cordova.platformId)expect(!0).toFailWithMessage("Platform does not support this feature"),e();else{var n=null;n=new Media(o,t.bind(null,e," badMedia = new Media , Unexpected succees callback, it should not create Media object with invalid file name"),function(t){expect(t).toBeDefined(),expect(t.code).toBe(MediaError.MEDIA_ERR_ABORTED),null!==n&&n.release(),e()}),n.play()}}),it("media.spec.16 position should be set properly",function(t){var o,n="http://cordova.apache.org/downloads/BlueZedEx.mp3",i=(Media.MEDIA_STOPPED,!0),r=function(o){o==Media.MEDIA_RUNNING&&i&&(i=!1,setTimeout(function(){a.getCurrentPosition(function(e){expect(e).toBeGreaterThan(0),a.stop(),a.release(),t()},e.bind(null,t,"media1.getCurrentPosition - Error getting media current position"))},1e3))},a=new Media(n,o,e.bind(null,t,"media1 = new Media - Error creating Media object. Media file: "+n),r);a.play()}),it("media.spec.17 duration should be set properly",function(t){"blackberry10"===cordova.platformId&&(expect(!0).toFailWithMessage("Platform does not supported this feature"),t());var o,n="http://cordova.apache.org/downloads/BlueZedEx.mp3",i=(Media.MEDIA_STOPPED,!0),r=function(e){e==Media.MEDIA_RUNNING&&i&&(i=!1,setTimeout(function(){expect(a.getDuration()).toBeGreaterThan(0),a.stop(),a.release(),t()},1e3))},a=new Media(n,o,e.bind(null,t,"media1 = new Media - Error creating Media object. Media file: "+n),r);a.play()})})},exports.defineManualTests=function(e,t){function o(e){console.log("playAudio()"),console.log(" -- media="+x);var t=y;e&&(t=e),t!==M&&null!==x&&(i(),x=null),null===x&&(x=new Media(t,function(){console.log("playAudio():Audio Success")},function(e){console.log("playAudio():Audio Error: "+e.code),a("Error: "+e.code)},function(e){console.log("playAudio():Audio Status: "+e),a(Media.MEDIA_MSG[e]),Media.MEDIA_STOPPED==e&&(clearInterval(E),E=null,c("0 sec"))})),M=t,document.getElementById("durationValue").innerHTML="",x.play(),null===E&&x.getCurrentPosition&&(E=setInterval(function(){x.getCurrentPosition(function(e){e>=0&&c(e+" sec")},function(e){console.log("Error getting pos="+e),c("Error: "+e)})},1e3));var o=0,n=setInterval(function(){o+=100,o>2e3&&clearInterval(n);var e=x.getDuration();e>0&&(clearInterval(n),document.getElementById("durationValue").innerHTML=e+" sec")},100)}function n(){console.log("pauseAudio()"),x&&x.pause()}function i(){console.log("stopAudio()"),x&&x.stop(),clearInterval(E),E=null}function r(){console.log("releaseAudio()"),x&&(x.stop(),x.release())}function a(e){document.getElementById("statusValue").innerHTML=e}function c(e){document.getElementById("positionValue").innerHTML=e}function d(e){var t=document.getElementById("seekInput").value;t=""===t?5e3:1e3*t,null===x&&(console.log("seekTo requested while media1 is null"),null===M&&(M=y),x=new Media(M,function(){console.log("seekToAudio():Audio Success")},function(e){console.log("seekAudio():Audio Error: "+e.code),a("Error: "+e.code)},function(e){console.log("seekAudio():Audio Status: "+e),a(Media.MEDIA_MSG[e]),Media.MEDIA_STOPPED==e&&(clearInterval(E),E=null,c("0 sec"))})),x.getCurrentPosition(function(o){var n=t;"by"===e&&(n=t+1e3*o),x.seekTo(n,function(){console.log("seekAudioTo():Audio Success"),s()},function(e){console.log("seekAudioTo():Audio Error: "+e.code)})},function(e){console.log("Error getting pos="+e),c("Error: "+e)})}function s(){x.getCurrentPosition(function(e){e>=0&&c(e+" sec")},function(e){console.log("Error getting pos="+e),c("Error: "+e)})}function l(){if(console.log("recordAudio()"),console.log(" -- media="+v),null==v){var e=A;v=new Media(e,function(){console.log("recordAudio():Audio Success")},function(e){console.log("recordAudio():Audio Error: "+e.code),a("Error: "+e.code)},function(e){console.log("recordAudio():Audio Status: "+e),a(Media.MEDIA_MSG[e])})}v.startRecord(),B=0;var t=setInterval(function(){B+=1,c(B+" sec"),B>=10&&(clearInterval(t),v.stopAudioRecord?v.stopAudioRecord():v.stopRecord(),console.log("recordAudio(): stop"))},1e3)}function u(){o(A)}function p(){var e=function(){console.log("error creating file for iOS recording")},t=function(e){A=e.fullPath},o=function(o){o.root.getFile("iOSRecording.wav",{create:!0},t,e)};window.requestFileSystem(LocalFileSystem.TEMPORARY,0,o,e)}function f(){var e=function(){console.log("error creating file for BB recording")},t=function(e){A=e.fullPath},o=function(o){o.root.getFile("BBRecording.amr",{create:!0},t,e)};window.requestFileSystem(LocalFileSystem.TEMPORARY,0,o,e)}function g(){var e=function(){console.log("error creating file for Win recording")},t=function(e){A=e.fullPath.replace(/\//g,"\\")},o=function(o){o.root.getFile("WinRecording.m4a",{create:!0},t,e)};window.requestFileSystem(LocalFileSystem.PERSISTENT,0,o,e)}function m(e,t,o,n){for(var i=document.createElement("table"),r=0;t>r;r++)for(var a=i.insertRow(r),c=0;o>c;c++){var d=a.insertCell(c);d.setAttribute("align","center");for(var s in n)if(n[s].position.row==r&&n[s].position.cell==c){var l,u=document.createElement(n[s].tag);""!==n[s].content&&(l=document.createTextNode(n[s].content),u.appendChild(l)),n[s].type&&(u.type=n[s].type),u.setAttribute("id",n[s].id),d.appendChild(u)}}return i.setAttribute("align","center"),i.setAttribute("id",e),i}function h(e,t){var o=document.createElement("li");o.appendChild(document.createTextNode(t)),e.appendChild(o)}var x=null,E=null,M=null,y="http://cordova.apache.org/downloads/BlueZedEx.mp3",v=null,B=0,A="myRecording.mp3",w=[{id:"statusTag",content:"Status:",tag:"div",position:{row:0,cell:0}},{id:"statusValue",content:"",tag:"div",position:{row:0,cell:2}},{id:"durationTag",content:"Duration:",tag:"div",position:{row:1,cell:0}},{id:"durationValue",content:"",tag:"div",position:{row:1,cell:2}},{id:"positionTag",content:"Position:",tag:"div",position:{row:2,cell:0}},{id:"positionValue",content:"",tag:"div",position:{row:2,cell:2}}],P=[{id:"playBtn",content:"",tag:"div",position:{row:0,cell:0}},{id:"pauseBtn",content:"",tag:"div",position:{row:0,cell:1}},{id:"stopBtn",content:"",tag:"div",position:{row:1,cell:0}},{id:"releaseBtn",content:"",tag:"div",position:{row:1,cell:1}},{id:"seekByBtn",content:"",tag:"div",position:{row:2,cell:0}},{id:"seekToBtn",content:"",tag:"div",position:{row:2,cell:1}},{id:"seekInput",content:"",tag:"input",type:"number",position:{row:2,cell:2}}],b=[{id:"recordbtn",content:"",tag:"div",position:{row:1,cell:0}},{id:"recordplayBtn",content:"",tag:"div",position:{row:1,cell:1}},{id:"recordpauseBtn",content:"",tag:"div",position:{row:2,cell:0}},{id:"recordstopBtn",content:"",tag:"div",position:{row:2,cell:1}}],D=document.createElement("h2");D.appendChild(document.createTextNode("Audio")),D.setAttribute("align","center"),e.appendChild(D),e.appendChild(m("info",3,3,w)),D=document.createElement("h2"),D.appendChild(document.createTextNode("Actions")),D.setAttribute("align","center"),e.appendChild(D),e.appendChild(m("audioActions",3,3,P)),t("Play",function(){o()},"playBtn"),t("Pause",function(){n()},"pauseBtn"),t("Stop",function(){i()},"stopBtn"),t("Release",function(){r()},"releaseBtn"),t("Seek By",function(){d("by")},"seekByBtn"),t("Seek To",function(){d("to")},"seekToBtn"),"ios"===cordova.platformId?p():"blackberry"===cordova.platformId?f():("windows"===cordova.platformId||"windows8"===cordova.platformId)&&g(),D=document.createElement("h4"),D.appendChild(document.createTextNode("Recommended Test Procedure")),e.appendChild(D);var T=document.createElement("ol");h(T,"Press play - Will start playing audio. Status: Running, Duration: 61.333 sec, Position: Current position of audio track"),h(T,"Press pause - Will pause the audio. Status: Paused, Duration: 61.333 sec, Position: Position where track was paused"),h(T,"Press play - Will begin playing where track left off from the pause"),h(T,"Press stop - Will stop the audio. Status: Stopped, Duration: 61.333 sec, Position: 0 sec"),h(T,"Press play - Will begin playing the audio track from the beginning"),h(T,"Press release - Will stop the audio. Status: Stopped, Duration: 61.333 sec, Position: 0 sec"),h(T,"Press play - Will begin playing the audio track from the beginning"),h(T,"Type 10 in the text box beside Seek To button"),h(T,"Press seek by - Will jump 10 seconds ahead in the audio track. Position: should jump by 10 sec"),h(T,"Press stop if track is not already stopped"),h(T,"Type 30 in the text box beside Seek To button"),h(T,"Press play then seek to - Should jump to Position 30 sec"),h(T,"Press stop"),h(T,"Type 5 in the text box beside Seek To button"),h(T,"Press play, let play past 10 seconds then press seek to - should jump back to position 5 sec"),D=document.createElement("div"),D.setAttribute("style","background:#B0C4DE;border:1px solid #FFA07A;margin:15px 6px 0px;min-width:295px;max-width:97%;padding:4px 0px 2px 10px;min-height:160px;max-height:200px;overflow:auto"),D.appendChild(T),e.appendChild(D),D=document.createElement("h2"),D.appendChild(document.createTextNode("Record Audio")),D.setAttribute("align","center"),e.appendChild(D),e.appendChild(m("recordContent",3,3,b)),t("Record Audio \n 10 sec",function(){l()},"recordbtn"),t("Play",function(){u()},"recordplayBtn"),t("Pause",function(){n()},"recordpauseBtn"),t("Stop",function(){i()},"recordstopBtn"),D=document.createElement("h4"),D.appendChild(document.createTextNode("Recommended Test Procedure")),e.appendChild(D),T=document.createElement("ol"),h(T,"Press Record Audio 10 sec - Will start recording audio for 10 seconds. Status: Running, Position: number of seconds recorded (will stop at 10)"),h(T,"Status will change to Stopped when finished recording"),h(T,"Press play - Will begin playing the recording. Status: Running, Duration: # of seconds of recording, Position: Current position of recording"),h(T,"Press stop - Will stop playing the recording. Status: Stopped, Duration: # of seconds of recording, Position: 0 sec"),h(T,"Press play - Will begin playing the recording from the beginning"),h(T,"Press pause - Will pause the playback of the recording. Status: Paused, Duration: # of seconds of recording, Position: Position where recording was paused"),h(T,"Press play - Will begin playing the recording from where it was paused"),D=document.createElement("div"),D.setAttribute("style","background:#B0C4DE;border:1px solid #FFA07A;margin:15px 6px 0px;min-width:295px;max-width:97%;padding:4px 0px 2px 10px;min-height:160px;max-height:200px;overflow:auto"),D.appendChild(T),e.appendChild(D)};