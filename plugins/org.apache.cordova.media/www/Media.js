var argscheck=require("cordova/argscheck"),utils=require("cordova/utils"),exec=require("cordova/exec"),mediaObjects={},Media=function(e,i,a,t){argscheck.checkArgs("SFFF","Media",arguments),this.id=utils.createUUID(),mediaObjects[this.id]=this,this.src=e,this.successCallback=i,this.errorCallback=a,this.statusCallback=t,this._duration=-1,this._position=-1,exec(null,this.errorCallback,"Media","create",[this.id,this.src])};Media.MEDIA_STATE=1,Media.MEDIA_DURATION=2,Media.MEDIA_POSITION=3,Media.MEDIA_ERROR=9,Media.MEDIA_NONE=0,Media.MEDIA_STARTING=1,Media.MEDIA_RUNNING=2,Media.MEDIA_PAUSED=3,Media.MEDIA_STOPPED=4,Media.MEDIA_MSG=["None","Starting","Running","Paused","Stopped"],Media.get=function(e){return mediaObjects[e]},Media.prototype.play=function(e){exec(null,null,"Media","startPlayingAudio",[this.id,this.src,e])},Media.prototype.stop=function(){var e=this;exec(function(){e._position=0},this.errorCallback,"Media","stopPlayingAudio",[this.id])},Media.prototype.seekTo=function(e){var i=this;exec(function(e){i._position=e},this.errorCallback,"Media","seekToAudio",[this.id,e])},Media.prototype.pause=function(){exec(null,this.errorCallback,"Media","pausePlayingAudio",[this.id])},Media.prototype.getDuration=function(){return this._duration},Media.prototype.getCurrentPosition=function(e,i){var a=this;exec(function(i){a._position=i,e(i)},i,"Media","getCurrentPositionAudio",[this.id])},Media.prototype.startRecord=function(){exec(null,this.errorCallback,"Media","startRecordingAudio",[this.id,this.src])},Media.prototype.stopRecord=function(){exec(null,this.errorCallback,"Media","stopRecordingAudio",[this.id])},Media.prototype.release=function(){exec(null,this.errorCallback,"Media","release",[this.id])},Media.prototype.setVolume=function(e){exec(null,null,"Media","setVolume",[this.id,e])},Media.onStatus=function(e,i,a){var t=mediaObjects[e];if(t)switch(i){case Media.MEDIA_STATE:t.statusCallback&&t.statusCallback(a),a==Media.MEDIA_STOPPED&&t.successCallback&&t.successCallback();break;case Media.MEDIA_DURATION:t._duration=a;break;case Media.MEDIA_ERROR:t.errorCallback&&t.errorCallback(a);break;case Media.MEDIA_POSITION:t._position=Number(a);break;default:console.error&&console.error("Unhandled Media.onStatus :: "+i)}else console.error&&console.error("Received Media.onStatus callback for unknown media :: "+e)},module.exports=Media;