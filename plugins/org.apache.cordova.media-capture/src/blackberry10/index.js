function capture(e,o,n,t){var i=o.limit||1,a=function(){n.callbackError({code:INTERNAL_ERROR_CODE})},c=function(e){var o=t.setFileSystemSandbox;t.setFileSystemSandbox=!1,window.webkitRequestFileSystem(window.PERSISTENT,1024,function(i){i.root.getFile(e,{},function(e){e.file(function(i){i.fullPath=e.fullPath,t.setFileSystemSandbox=o,n.callbackOk([i])},a)},a)},a)},d=function(e){window.qnx.webplatform.getApplication().invocation.removeEventListener("childCardClosed",d),e.data&&""!==e.data?c(e.data):n.callbackError({code:NO_MEDIA_FILES_ERROR_CODE})};onCancelled=function(){n.callbackError({code:NO_MEDIA_FILES_ERROR_CODE})},onInvoked=function(e){e&&n.callbackError({code:APPLICATION_BUSY_ERROR_CODE})},0>i?n.error({code:INVALID_ARGUMENT_ERROR_CODE}):"audio"===e?(window.qnx.webplatform.getApplication().invocation.invoke({target:"sys.apps.audiorecorder",action:"bb.action.CAPTURE"},function(e){e?console.log(e):window.qnx.webplatform.getApplication().invocation.addEventListener("childCardClosed",d)}),n.noResult(!0)):(window.qnx.webplatform.getApplication().cards.camera.open(e,c,onCancelled,onInvoked),n.noResult(!0))}var INTERNAL_ERROR_CODE=0,APPLICATION_BUSY_ERROR_CODE=1,INVALID_ARGUMENT_ERROR_CODE=2,NO_MEDIA_FILES_ERROR_CODE=3,NOT_SUPPORTED_ERROR_CODE=20;module.exports={getSupportedAudioModes:function(e,o,n,t){var i=new PluginResult(n,t);i.ok([])},getSupportedImageModes:function(e,o,n,t){var i=new PluginResult(n,t);i.ok([])},getSupportedVideoModes:function(e,o,n,t){var i=new PluginResult(n,t);i.ok([])},captureImage:function(e,o,n,t){var i=new PluginResult(n,t),a="undefined"===n[0]?{}:JSON.parse(decodeURIComponent(n[0]));capture("photo",a,i,t.webview)},captureVideo:function(e,o,n,t){var i=new PluginResult(n,t),a="undefined"===n[0]?{}:JSON.parse(decodeURIComponent(n[0]));capture("video",a,i,t.webview)},captureAudio:function(e,o,n,t){var i=new PluginResult(n,t);capture("audio",{},i,t.webview)}};