function handlers(){return battery.channels.batterystatus.numHandlers+battery.channels.batterylow.numHandlers+battery.channels.batterycritical.numHandlers}var cordova=require("cordova"),exec=require("cordova/exec"),STATUS_CRITICAL=5,STATUS_LOW=20,Battery=function(){this._level=null,this._isPlugged=null,this.channels={batterystatus:cordova.addWindowEventHandler("batterystatus"),batterylow:cordova.addWindowEventHandler("batterylow"),batterycritical:cordova.addWindowEventHandler("batterycritical")};for(var e in this.channels)this.channels[e].onHasSubscribersChange=Battery.onHasSubscribersChange};Battery.onHasSubscribersChange=function(){1===this.numHandlers&&1===handlers()?exec(battery._status,battery._error,"Battery","start",[]):0===handlers()&&exec(null,null,"Battery","stop",[])},Battery.prototype._status=function(e){if(e&&(battery._level!==e.level||battery._isPlugged!==e.isPlugged)){if(null==e.level&&null!=battery._level)return;cordova.fireWindowEvent("batterystatus",e),e.isPlugged||(battery._level>STATUS_CRITICAL&&e.level<=STATUS_CRITICAL?cordova.fireWindowEvent("batterycritical",e):battery._level>STATUS_LOW&&e.level<=STATUS_LOW&&cordova.fireWindowEvent("batterylow",e)),battery._level=e.level,battery._isPlugged=e.isPlugged}},Battery.prototype._error=function(e){console.log("Error initializing Battery: "+e)};var battery=new Battery;module.exports=battery;