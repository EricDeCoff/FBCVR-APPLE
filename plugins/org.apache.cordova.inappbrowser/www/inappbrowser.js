function InAppBrowser(){this.channels={loadstart:channel.create("loadstart"),loadstop:channel.create("loadstop"),loaderror:channel.create("loaderror"),exit:channel.create("exit")}}var exec=require("cordova/exec"),channel=require("cordova/channel"),modulemapper=require("cordova/modulemapper"),urlutil=require("cordova/urlutil");InAppBrowser.prototype={_eventHandler:function(e){e&&e.type in this.channels&&this.channels[e.type].fire(e)},close:function(){exec(null,null,"InAppBrowser","close",[])},show:function(){exec(null,null,"InAppBrowser","show",[])},addEventListener:function(e,n){e in this.channels&&this.channels[e].subscribe(n)},removeEventListener:function(e,n){e in this.channels&&this.channels[e].unsubscribe(n)},executeScript:function(e,n){if(e.code)exec(n,null,"InAppBrowser","injectScriptCode",[e.code,!!n]);else{if(!e.file)throw new Error("executeScript requires exactly one of code or file to be specified");exec(n,null,"InAppBrowser","injectScriptFile",[e.file,!!n])}},insertCSS:function(e,n){if(e.code)exec(n,null,"InAppBrowser","injectStyleCode",[e.code,!!n]);else{if(!e.file)throw new Error("insertCSS requires exactly one of code or file to be specified");exec(n,null,"InAppBrowser","injectStyleFile",[e.file,!!n])}}},module.exports=function(e,n,r,o){if(window.frames&&window.frames[n]){var i=modulemapper.getOriginalSymbol(window,"open");return i.apply(window,arguments)}e=urlutil.makeAbsolute(e);var t=new InAppBrowser;o=o||{};for(var l in o)t.addEventListener(l,o[l]);var c=function(e){t._eventHandler(e)};return r=r||"",exec(c,c,"InAppBrowser","open",[e,n,r]),t};