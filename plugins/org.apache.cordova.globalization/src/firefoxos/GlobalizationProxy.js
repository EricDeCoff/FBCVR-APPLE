function callIfL10nReady(e){return is_l10n_ready?e():void document.addEventListener("l10n_ready",e)}function loadFile(e,t,n){var a=document.createElement(e);for(var r in t)t.hasOwnProperty(r)&&a.setAttribute(r,t[r]);a.onreadystatechange=a.onload=function(){var e=a.readyState;n.done||e&&!/loaded|complete/.test(e)||(n.done=!0,n())},document.head.appendChild(a)}function loadDependencies(){loadFile("link",{rel:"resource",type:"application/l10n",href:"locales/date.ini"},function(){}),loadFile("script",{type:"text/javascript",src:"js/l10n.js"},function(){loadFile("script",{type:"text/javascript",src:"js/l10n_date.js"},function(){document.dispatchEvent(l10n_loaded)})})}function getPreferredLanguage(e){callIfL10nReady(function(){e({value:navigator.mozL10n.language.code})})}function getLocaleName(e){callIfL10nReady(function(){e(navigator.mozL10n.language.code)})}function dateToString(e,t,n){function a(e,t,n){var a=navigator.mozL10n.get("shortDateTimeFormat");if(n){if("date"===n.selector)return e.localeDateString(t);if("time"===n.selector)return e.localeTimeString(t);if("short"!==n.formatLength)return a=navigator.mozL10n.get("dateTimeFormat"),e.localeString(t,a);if("time"===n.selector)return e.localeTimeString(t,a)}var r=e.localeDateString(t),o=e.localeTimeString(t);return r+" "+o}var r=new Date(n[0].date),o=n[0].options;callIfL10nReady(function(){var t=new navigator.mozL10n.DateTimeFormat;e({value:a(t,r,o)})})}function stringToDate(e,t,n){var a,r=n[0].dateString,o=n[0].options;try{a=new Date(r)}catch(i){return console.log("Cordova, stringToDate, An error occurred "+i.message),t(new GlobalizationError(GlobalizationError.PARSING_ERROR,i.message))}if(!a||"Invalid Date"===a)return console.log("Cordova, stringToDate, Invalid Date: "+r),t(new GlobalizationError(GlobalizationError.PARSING_ERROR,"Invalid Date ("+r+")"));var l={year:a.getFullYear(),month:a.getMonth(),day:a.getDay()},s={hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),millisecond:a.getMilliseconds()};if(o){if("date"===o.selector)return e(l);if("time"===o.selector)return e(s)}for(var d in s)s.hasOwnProperty(d)&&(l[d]=s[d]);e(l)}function getDatePattern(e,t){t(GlobalizationError.UNKNOWN_ERROR,"unsupported")}function getDateNames(e,t,n){callIfL10nReady(function(){var t="long",a="month",r=n[0].options;r&&("narrow"===r.type?t="short":"genitive"===r.type&&"months"===r.item&&(t=r.type),"days"===r.item&&(a="weekday"));for(var o="month"===a?11:6,i=[],l=0;o>=l;l++)i.push(navigator.mozL10n.get(a+"-"+l+"-"+t));e({value:i})})}function isDayLightSavingsTime(e,t,n){var a=new Date(n[0].date);e({dst:a.isDayLightSavingsTime()})}function getFirstDayOfWeek(e){callIfL10nReady(function(){var t=navigator.mozL10n.get("weekStartsOnMonday");e({value:1+parseInt(t)})})}function numberToString(e,t,n){n(GlobalizationError.UNKNOWN_ERROR,"unsupported")}function stringToNumber(e,t,n){n(GlobalizationError.UNKNOWN_ERROR,"unsupported")}function getNumberPattern(e,t){t(GlobalizationError.UNKNOWN_ERROR,"unsupported")}function getCurrencyPattern(e,t,n){n(GlobalizationError.UNKNOWN_ERROR,"unsupported")}var GlobalizationError=require("./GlobalizationError"),l10n_loaded=new Event("l10n_loaded"),l10n_ready=new Event("l10n_ready"),is_l10n_ready=!1;document.addEventListener("l10n_loaded",function(){console.log("DEBUG: L10n loaded"),navigator.mozL10n.ready(function(){console.log("DEBUG: L10n ready"),is_l10n_ready=!0,document.dispatchEvent(l10n_ready)})}),loadDependencies(),Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1),t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())},Date.prototype.isDayLightSavingsTime=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var Globalization={getLocaleName:getLocaleName,getPreferredLanguage:getPreferredLanguage,dateToString:dateToString,stringToDate:stringToDate,getDatePattern:getDatePattern,getDateNames:getDateNames,isDayLightSavingsTime:isDayLightSavingsTime,getFirstDayOfWeek:getFirstDayOfWeek,numberToString:numberToString,stringToNumber:stringToNumber,getNumberPattern:getNumberPattern,getCurrencyPattern:getCurrencyPattern};require("cordova/exec/proxy").add("Globalization",Globalization);