function write(e){var r,t=this,i="undefined"!=typeof window.Blob&&"undefined"!=typeof window.ArrayBuffer;if(e instanceof File||i&&e instanceof Blob){var o=new FileReader;return o.onload=function(){FileWriter.prototype.write.call(t,this.result)},void(i?o.readAsArrayBuffer(e):o.readAsText(e))}if(r=i&&e instanceof ArrayBuffer,this.readyState===FileWriter.WRITING)throw new FileError(FileError.INVALID_STATE_ERR);this.readyState=FileWriter.WRITING;var n=this;if("function"==typeof n.onwritestart&&n.onwritestart(new ProgressEvent("writestart",{target:n})),e instanceof ArrayBuffer||e.buffer instanceof ArrayBuffer){e=new Uint8Array(e);for(var a="",s=0;s<e.byteLength;s++)a+=String.fromCharCode(e[s]);e=a}var f="file://localhost",l=this.localURL;l.substr(0,f.length)==f&&(l=l.substr(f.length)),exec(function(e){n.readyState!==FileWriter.DONE&&(n.position+=e,n.length=n.position,n.readyState=FileWriter.DONE,"function"==typeof n.onwrite&&n.onwrite(new ProgressEvent("write",{target:n})),"function"==typeof n.onwriteend&&n.onwriteend(new ProgressEvent("writeend",{target:n})))},function(e){n.readyState!==FileWriter.DONE&&(n.readyState=FileWriter.DONE,n.error=new FileError(e),"function"==typeof n.onerror&&n.onerror(new ProgressEvent("error",{target:n})),"function"==typeof n.onwriteend&&n.onwriteend(new ProgressEvent("writeend",{target:n})))},"File","write",[l,e,this.position,r])}var exec=require("cordova/exec"),FileError=require("./FileError"),ProgressEvent=require("./ProgressEvent");module.exports={write:write},require("cordova/exec/proxy").add("FileWriter",module.exports);