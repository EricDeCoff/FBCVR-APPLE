var resolve=cordova.require("org.apache.cordova.file.resolveLocalFileSystemURIProxy"),requestAnimationFrame=cordova.require("org.apache.cordova.file.bb10RequestAnimationFrame");module.exports=function(e,r,o,n){var i,t=o[0],a=o[1],c=o[2],l=function(){resolve(function(r){"function"==typeof e&&e(r)},f,[a+i.name])},f=function(e){"function"==typeof r&&r(e&&e.code?t===a?FileError.INVALID_MODIFICATION_ERR:e.code===FileError.SECURITY_ERR?FileError.INVALID_MODIFICATION_ERR:e.code:e)},s=function(e,r,o){i=e,e.createWriter(function(e){e.onwriteend=function(){n?o.nativeEntry.remove(l,function(){console.error("Move operation failed. Files may exist at both source and destination")}):l()},e.onerror=f,e.write(r)},f)},u=function(e){e.nativeEntry.file?e.nativeEntry.file(function(r){var o=(new FileReader)._realReader;o.onloadend=function(){var r=new Uint8Array(this.result),o=new Blob([r]);resolve(function(r){requestAnimationFrame(function(){r.nativeEntry.getFile(c,{create:!0},function(r){s(r,o,e)},f)})},f,[a])},o.onerror=f,o.readAsArrayBuffer(r)},f):f(FileError.INVALID_MODIFICATION_ERR)},I=function(e){resolve(function(r){e.filesystemName!==r.filesystemName?(console.error("Copying directories between filesystems is not supported on BB10"),f(FileError.INVALID_MODIFICATION_ERR)):e.nativeEntry.copyTo(r.nativeEntry,c,function(){resolve(function(r){i=r,n?e.nativeEntry.removeRecursively(l,f):l()},f,[a+c])},f)},f,[a])};a+c===t?f(FileError.INVALID_MODIFICATION_ERR):c.indexOf(":")>-1?f(FileError.ENCODING_ERR):resolve(function(e){e.isDirectory?I(e):u(e)},f,[t])};