function start(){exec(function(e){var r=listeners.slice(0);accel=new Acceleration(e.x,e.y,e.z,e.timestamp);for(var c=0,t=r.length;t>c;c++)r[c].win(accel)},function(e){for(var r=listeners.slice(0),c=0,t=r.length;t>c;c++)r[c].fail(e)},"Accelerometer","start",[]),running=!0}function stop(){exec(null,null,"Accelerometer","stop",[]),running=!1}function createCallbackPair(e,r){return{win:e,fail:r}}function removeListeners(e){var r=listeners.indexOf(e);r>-1&&(listeners.splice(r,1),0===listeners.length&&stop())}var argscheck=require("cordova/argscheck"),utils=require("cordova/utils"),exec=require("cordova/exec"),Acceleration=require("./Acceleration"),running=!1,timers={},listeners=[],accel=null,accelerometer={getCurrentAcceleration:function(e,r){argscheck.checkArgs("fFO","accelerometer.getCurrentAcceleration",arguments);var c,t=function(r){removeListeners(c),e(r)},n=function(e){removeListeners(c),r&&r(e)};c=createCallbackPair(t,n),listeners.push(c),running||start()},watchAcceleration:function(e,r,c){argscheck.checkArgs("fFO","accelerometer.watchAcceleration",arguments);var t=c&&c.frequency&&"number"==typeof c.frequency?c.frequency:1e4,n=utils.createUUID(),i=createCallbackPair(function(){},function(e){removeListeners(i),r&&r(e)});return listeners.push(i),timers[n]={timer:window.setInterval(function(){accel&&e(accel)},t),listeners:i},running?accel&&e(accel):start(),n},clearWatch:function(e){e&&timers[e]&&(window.clearInterval(timers[e].timer),removeListeners(timers[e].listeners),delete timers[e])}};module.exports=accelerometer;